# =============================================================================
# stunnel-kick.conf — Tunnel TLS pour la diffusion vers Kick (RTMPS)
# =============================================================================
# Stunnel agit comme proxy local : nginx-rtmp envoie du RTMP brut vers
# localhost:STUNNEL_PORT_LOCAL, Stunnel le chiffre en TLS vers Kick.
#
# Installation : sudo apt install stunnel4
# Activation   : sudo systemctl enable stunnel4
# Lancement    : sudo systemctl start stunnel4
# =============================================================================

# --- Paramètres généraux -----------------------------------------------------
pid = /var/run/stunnel4/stunnel.pid
output = /var/log/stunnel4/stunnel.log
syslog = no

# Sécurité TLS
sslVersion = TLSv1.2
options = NO_SSLv2
options = NO_SSLv3

# Niveau de journalisation (0=urgence … 7=débogage)
debug = 5

# --- Section Kick ------------------------------------------------------------
[kick-rtmps]
client = yes
; Stunnel écoute sur ce port local (nginx-rtmp y envoie le flux RTMP)
accept  = 127.0.0.1:11935
; Stunnel transmet vers le serveur RTMPS de Kick
connect = fa723fc1b171.global-contribute.live-video.net:443
; Vérification du certificat TLS de Kick
verify = 2
CAfile = /etc/ssl/certs/ca-certificates.crt
